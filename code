#!/usr/bin/env bash

exclude_dirs={.git,expected-result,sample-file}

function replace() {
    for file_path in $(eval "grep -rl $1 --exclude-dir=$exclude_dirs ."); do
        echo [DEBUG] Replacing $file_path
        sed_command="sed -i"
        # TODO
        # if is_exact_match:
        # sed_command = "$sed_command -E"
        # term_to_replace = "\<$term_to_replace\>"
        if [[ "${BASH_VERSION:0:1}" == "3" ]]; then
            eval "$sed_command '' 's/$1/$2/g' $file_path"
        else
            eval "$sed_command 's/$1/$2/g' $file_path"
        fi
    done
    echo "[DEBUG] Done. Replaced '$1' with '$2'"
}
